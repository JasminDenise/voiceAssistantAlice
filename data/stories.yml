version: "3.1"

# ML policies: training data to teach assistant what to do next
# conversation training data /potential conversation flow
# actual user conversations, small stories, not full conversations
# memorization policy

stories:

- story: start booking form
  steps:
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form

- story: rebooking with known restaurant
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - slot_was_set:
        - past_bookings: true
    - slot_was_set:
        - past_restaurant_name: "La Bella Italia"
    - slot_was_set:
        - rebook: true
    # The form continues and asks for time, day, and guests

- story: rebooking with unknown restaurant
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - slot_was_set:
        - past_bookings: true
    - slot_was_set:
        - past_restaurant_name: null
    - slot_was_set:
        - past_restaurant_name: "Casa Mexicana"
    - slot_was_set:
        - rebook: true
    # The form continues and asks for time, day, and guests

- story: booking new restaurant after past visit
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - slot_was_set:
        - past_bookings: true
    - slot_was_set:
        - rebook: false
    # The form continues to ask full preferences

- story: new booking, no past bookings
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - slot_was_set:
        - past_bookings: false
    # The form continues to ask full preferences

- story: fallback and clarification
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - intent: inform_fallback
    - action: action_default_fallback
    - action: utter_default