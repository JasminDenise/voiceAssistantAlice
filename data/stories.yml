version: "3.1"

# ML policies: training data to teach assistant what to do next
# conversation training data/potential conversation flow
# actual user conversations, small stories, not full conversations
# memorization policy

stories:

# Happy Path: User wants to book a specific restaurant (past bookings not relevant, restaurant name known)
- story: Book a specific restaurant
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - slot_was_set:
        - past_restaurant_name: La Bella Italia  # Known restaurant name
    - action: known_restaurant_form
    - active_loop: known_restaurant_form
    - action: action_suggest_restaurant
    - action: utter_submit

# Happy Path: User wants a suggestion with a past booking and wants to rebook
- story: Rebook with past restaurant
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - slot_was_set:
        - past_restaurant_name: La Bella Italia # Known restaurant from past booking
        - rebook: true
    - action: known_restaurant_form
    - active_loop: known_restaurant_form
    - action: action_suggest_restaurant
    - action: utter_submit

# Happy Path: User wants a suggestion without past bookings, general suggestion
- story: Suggest restaurant without past bookings #conflict 
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - action: action_suggest_restaurant
    - action: utter_submit

# Happy Path: User wants a suggestion for a different restaurant than a past booking
- story: Suggest different restaurant than past booking
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - slot_was_set:
        - past_restaurant_name: "La Bella Italia"  # Past restaurant provided
        - rebook: false
    - action: restaurant_form
    - active_loop: restaurant_form
    - action: action_suggest_restaurant
    - action: utter_submit
