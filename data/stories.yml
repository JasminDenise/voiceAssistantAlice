version: "3.1"

# ML policies: training data to teach assistant what to do next
# conversation training data/potential conversation flow
# actual user conversations, small stories, not full conversations
# memorization policy

stories:

# User wants to book or rebook a past restaurant 
- story: User wants to book a restaurant
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form

- story: User wants to rebook past restaurant
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - slot_was_set:
        - requested_slot: past_bookings
    - intent: affirm
    - slot_was_set:
        - past_bookings: true



- story: User doesn't want to rebook past restaurant
  steps:
    - intent: greet
    - action: utter_greet
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form
    - slot_was_set:
        - requested_slot: past_bookings
    - intent: deny
    - slot_was_set:
        - past_bookings: false


- story: interactive_story_1
  steps:
  - intent: inform_booking_details
    entities:
    - time: 7pm
    - time: '2025-04-19T19:00:00.000+02:00'
  - slot_was_set:
    - date_and_time: '2025-04-19T19:00:00.000+02:00'
  - action: restaurant_form
  - active_loop: restaurant_form
  - slot_was_set:
    - requested_slot: past_bookings
  - slot_was_set:
    - date_and_time: '2025-04-19T19:00:00.000+02:00'
  - intent: deny
  - slot_was_set:
    - past_bookings: false
  - action: restaurant_form
  - slot_was_set:
    - past_bookings: false
  - slot_was_set:
    - requested_slot: cuisine_preferences
  - intent: inform_booking_details
    entities:
    - cuisine_preferences: Italian
    - cuisine_preferences: italian
    - cuisine_preferences: german
  - slot_was_set:
    - cuisine_preferences:
      - Italian
      - italian
      - german
  - action: restaurant_form
  - slot_was_set:
    - cuisine_preferences:
      - Italian
      - italian
      - german
  - slot_was_set:
    - requested_slot: dietary_preferences
  - intent: inform_booking_details
    entities:
    - dietary_preferences: omnivore
  - slot_was_set:
    - dietary_preferences:
      - omnivore
  - action: restaurant_form
  - slot_was_set:
    - dietary_preferences:
      - omnivore
  - slot_was_set:
    - requested_slot: num_of_guests
  - intent: inform_booking_details
    entities:
    - number: two
    - number: 2
  - slot_was_set:
    - num_of_guests: 2
  - action: restaurant_form
  - slot_was_set:
    - num_of_guests: 2
  - slot_was_set:
    - requested_slot: null
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_suggest_restaurant
  - intent: confirm_booking
  - action: utter_submit
  - action: action_clear_slots

- story: interactive_story_2
  steps:
  - intent: inform_booking_details
  - action: restaurant_form
  - active_loop: restaurant_form
  - slot_was_set:
    - requested_slot: past_bookings
  - intent: inform_booking_details
    entities:
    - affirm: Yes
    - past_restaurant_name: Bella Roma
    - past_restaurant_name: Bella Roma
  - slot_was_set:
    - past_restaurant_name: Bella Roma
  - intent: inform_booking_details
    entities:
    - affirm: Yes
  - intent: inform_booking_details
    entities:
    - affirm: Yes
    - past_restaurant_name: la bella
    - time: roma
    - past_restaurant_name: bella roma
  - slot_was_set:
    - past_restaurant_name: bella roma
  - slot_was_set:
    - date_and_time: roma
  - intent: inform_booking_details
    entities:
    - affirm: Yes
    - past_restaurant_name: Bella Roma
    - past_restaurant_name: Bella Roma
  - slot_was_set:
    - past_restaurant_name: Bella Roma
  - intent: inform_booking_details
    entities:
    - affirm: Yes
    - past_restaurant_name: Bella Roma
    - past_restaurant_name: Bella Roma
  - slot_was_set:
    - past_restaurant_name: Bella Roma

- story: interactive_story_3
  steps:
  - intent: inform_booking_details
    entities:
    - past_restaurant_name: Bella Roma
  - slot_was_set:
    - past_restaurant_name: Bella Roma
  - action: restaurant_form
  - active_loop: restaurant_form
  - slot_was_set:
    - requested_slot: past_bookings
  - slot_was_set:
    - past_restaurant_name: Bella Roma
  - intent: affirm
  - slot_was_set:
    - past_bookings: true
  - action: restaurant_form
  - slot_was_set:
    - past_bookings: true
  - slot_was_set:
    - requested_slot: date_and_time
  - intent: inform_booking_details
    entities:
    - time: '2025-04-19T00:00:00.000+02:00'
  - slot_was_set:
    - date_and_time: '2025-04-19T00:00:00.000+02:00'
  - action: restaurant_form
  - slot_was_set:
    - date_and_time: null
  - slot_was_set:
    - requested_slot: date_and_time
  - intent: inform_booking_details
    entities:
    - time: 8:30 PM
    - time: '2025-04-19T20:30:00.000+02:00'
  - slot_was_set:
    - date_and_time: '2025-04-19T20:30:00.000+02:00'
  - action: restaurant_form
  - slot_was_set:
    - date_and_time: '2025-04-19T20:30:00.000+02:00'
  - slot_was_set:
    - requested_slot: num_of_guests
  - intent: inform_booking_details
    entities:
    - number: three
    - number: 3
  - slot_was_set:
    - num_of_guests: 3
  - action: restaurant_form
  - slot_was_set:
    - num_of_guests: 3
  - slot_was_set:
    - requested_slot: null
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_suggest_restaurant
  - intent: nlu_fallback
  - intent: nlu_fallback
  - intent: confirm_booking
    entities:
    - confirm_booking: yes please!
  - action: utter_submit
  - action: action_clear_slots
