version: "3.1"

# describe short pieces of conversations that always go the same way
# for one-off interactions

rules:

# --- General Interaction Rules ---
- rule: Greet user
  steps:
    - intent: greet
    - action: utter_greet

- rule: Say goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye

- rule: Handle bot challenge
  steps:
    - intent: bot_challenge
    - action: utter_iamabot

# --- Booking Flow Rules ---
- rule: Activate restaurant form
  steps:
    - intent: inform_booking_details
    - action: restaurant_form
    - active_loop: restaurant_form

- rule: Submit restaurant form
  condition:
    - active_loop: restaurant_form
  steps:
    - action: restaurant_form
    - active_loop: null
    - action: action_suggest_restaurant
    - action: utter_booking_slots
    - action: utter_confirm_booking

# --- Fallback Handling ---
- rule: Handle fallback
  steps:
    - intent: inform_fallback
    - action: action_default_fallback
    - action: utter_default