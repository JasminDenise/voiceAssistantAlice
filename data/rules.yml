version: "3.1"

# describe short pieces of conversations that always go the same way
# for one-off interactions

rules:

# --- General Interaction Rules ---
- rule: Greet user
  steps:
    - intent: greet
    - action: utter_greet

- rule: Say goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye

- rule: Handle bot challenge
  steps:
    - intent: bot_challenge
    - action: utter_iamabot

- rule: Ask for Confirmation - User confirms
  steps:
    - action: utter_booking_confirmation
    - intent: confirm_booking
    - action: utter_submit

- rule: Ask for Confirmation - User Denies
  steps:
    - action: utter_booking_confirmation
    - intent: deny_booking
    - action: utter_booking_canceled


# # --- Restaurant Booking Rules ---
# # Rule for when a known restaurant is provided (skip asking for dietary and cuisine preferences)
# - rule: Known restaurant booking
#   steps:
#     - intent: inform_booking_details
#     - slot_was_set:
#         - past_restaurant_name: "La Bella Italia"  # Example past restaurant
#     - action: known_restaurant_form
#     - active_loop: known_restaurant_form

# # Rule for new restaurant booking (ask for all preferences)
# - rule: New restaurant booking
#   steps:
#     - intent: inform_booking_details
#     - slot_was_set:
#         - past_restaurant_name: null
#     - action: restaurant_form
#     - active_loop: restaurant_form

# Rule for fallback when the bot doesn't understand the user input
- rule: Out of Scope
  steps:
    - intent: out_of_scope
    - action: utter_default

# Rule for when the user wants to stop the form and cancel the booking
- rule: Cancel booking
  steps:
    - intent: cancel
    - action: utter_booking_canceled